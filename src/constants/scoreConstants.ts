/**
 * –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –æ—á–∫–æ–≤ –∏ —à—Ç—Ä–∞—Ñ–æ–≤
 *
 * üìä –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –Ω–∞–≥—Ä–∞–¥ –∏ —à—Ç—Ä–∞—Ñ–æ–≤
 *
 * **–ù–∞–≥—Ä–∞–¥—ã (+):**
 * - –ú–æ–Ω–µ—Ç–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è: +3
 * - –ú–æ–Ω–µ—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è: +2
 * - –ö–ª—é—á —É–Ω–∏–∫–∞–ª—å–Ω—ã–π: +5
 * - –ö–ª—é—á –ø–æ–≤—Ç–æ—Ä–Ω—ã–π: +3
 * - –ü–æ—Ä—Ç–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: +10
 *
 * **–®—Ç—Ä–∞—Ñ—ã (-):**
 * - –£—Ä–æ–Ω –æ—Ç –≤—Ä–∞–≥–∞ (–±–∞–∑–æ–≤—ã–π): -2
 * - –ü–æ—Ç–µ—Ä—è–Ω–Ω–∞—è –º–æ–Ω–µ—Ç–∫–∞: -3
 * - –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –∫–ª—é—á: -5
 * - –û—à–∏–±–∫–∞ –≤ –∫–≤–∏–∑–µ –º–æ–Ω–µ—Ç–∫–∏: -3
 * - –û—à–∏–±–∫–∞ –≤ –∫–≤–∏–∑–µ –∫–ª—é—á–∞: -5
 * - –û—à–∏–±–∫–∞ –≤ –ø–æ—Ä—Ç–∞–ª–µ: -10
 *
 * **–ü—Ä–∞–≤–∏–ª–æ:** –ú–∏–Ω–∏–º—É–º –æ—á–∫–æ–≤ = 0 (–Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏)
 */

// ========================================
// –ù–ê–ì–†–ê–î–´ (REWARDS)
// ========================================

export const REWARD = {
  /** –ú–æ–Ω–µ—Ç–∫–∏ */
  COIN_UNIQUE: 3,      // –£—Å–ø–µ—Ö –≤ –∫–≤–∏–∑–µ –º–æ–Ω–µ—Ç–∫–∏ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
  COIN_REPEAT: 2,      // –£—Å–ø–µ—Ö –≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∫–≤–∏–∑–µ –º–æ–Ω–µ—Ç–∫–∏

  /** –ö–ª—é—á–∏ */
  KEY_UNIQUE: 5,       // –£—Å–ø–µ—Ö –≤ –∫–≤–∏–∑–µ –∫–ª—é—á–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å)
  KEY_REPEAT: 3,       // –£—Å–ø–µ—Ö –≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∫–≤–∏–∑–µ –∫–ª—é—á–∞

  /** –ü–æ—Ä—Ç–∞–ª */
  PORTAL_CORRECT: 10,  // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª
} as const;

// ========================================
// –®–¢–†–ê–§–´ (PENALTIES)
// ========================================

export const PENALTY = {
  /** –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω –æ—Ç –≤—Ä–∞–≥–∞ (–≤—Å–µ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è) */
  ENEMY_DAMAGE_BASE: -2,

  /** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à—Ç—Ä–∞—Ñ—ã –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ */
  COIN_LOST: -3,        // –ü–æ—Ç–µ—Ä—è–Ω–Ω–∞—è –º–æ–Ω–µ—Ç–∫–∞ (–Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω)
  KEY_LOST: -5,         // –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –∫–ª—é—á (–Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω)

  /** –®—Ç—Ä–∞—Ñ—ã –∑–∞ –æ—à–∏–±–∫–∏ –≤ –∫–≤–∏–∑–∞—Ö */
  QUIZ_COIN_WRONG: -3,  // –û—à–∏–±–∫–∞ –≤ –∫–≤–∏–∑–µ –º–æ–Ω–µ—Ç–∫–∏
  QUIZ_KEY_WRONG: -5,   // –û—à–∏–±–∫–∞ –≤ –∫–≤–∏–∑–µ –∫–ª—é—á–∞
  QUIZ_PORTAL_WRONG: -10, // –û—à–∏–±–∫–∞ –≤ –ø–æ—Ä—Ç–∞–ª–µ (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å)

  /** –ú–∏–Ω–∏–º—É–º –æ—á–∫–æ–≤ */
  MIN_SCORE: 0,
} as const;

// ========================================
// –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
// ========================================

/**
 * –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–æ–ª–Ω—ã–π —à—Ç—Ä–∞—Ñ –∑–∞ —É—Ä–æ–Ω –æ—Ç –≤—Ä–∞–≥–∞ —Å —É—á—ë—Ç–æ–º –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
 * @param hasCoin –ë—ã–ª–∞ –ª–∏ –º–æ–Ω–µ—Ç–∫–∞ —É –∏–≥—Ä–æ–∫–∞
 * @param hasKey –ë—ã–ª –ª–∏ –∫–ª—é—á —É –∏–≥—Ä–æ–∫–∞
 * @returns –û–±—â–∏–π —à—Ç—Ä–∞—Ñ (–≤—Å–µ–≥–¥–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ 0)
 */
export function calculateEnemyDamagePenalty(hasCoin: boolean, hasKey: boolean): number {
  let penalty = PENALTY.ENEMY_DAMAGE_BASE;

  if (hasCoin) {
    penalty += PENALTY.COIN_LOST;
  } else if (hasKey) {
    penalty += PENALTY.KEY_LOST;
  }

  return penalty;
}

/**
 * –ü—Ä–∏–º–µ–Ω–∏—Ç—å —à—Ç—Ä–∞—Ñ –∫ –æ—á–∫–∞–º —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
 * @param currentScore –¢–µ–∫—É—â–∏–µ –æ—á–∫–∏
 * @param penalty –®—Ç—Ä–∞—Ñ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)
 * @returns –ù–æ–≤—ã–µ –æ—á–∫–∏ (–Ω–µ –º–µ–Ω—å—à–µ MIN_SCORE)
 */
export function applyPenalty(currentScore: number, penalty: number): number {
  const newScore = currentScore + penalty;
  return Math.max(PENALTY.MIN_SCORE, newScore);
}

// ========================================
// –¢–ò–ü–ò–ó–ê–¶–ò–Ø
// ========================================

export type RewardKey = keyof typeof REWARD;
export type PenaltyKey = keyof typeof PENALTY;
