# Modal Guide - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–∞–º

**–í–µ—Ä—Å–∏—è:** 2.0
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-28
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-06
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—Å–µ–º –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–∞–º –∏–≥—Ä—ã
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**
- `src/game/ui/KeyQuestionModal.ts`
- `src/game/ui/PortalModal.ts`
- `src/game/ui/GameOverModal.ts`
- `src/game/ui/CoinBubbleQuiz.ts`
- `src/game/ui/UIManager.ts`
- `src/game/ui/ModalSizeCalculator.ts`
- `src/game/utils/FontSizeCalculator.ts`
- `src/constants/textStyles.ts`

---

## –û–±–∑–æ—Ä

–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–∫–æ–º –≤–Ω–µ –≥–µ–π–º–ø–ª–µ—è. –í—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞:

- **–ü–∞—É–∑—è—Ç** –∏–≥—Ä–æ–≤—É—é —Å—Ü–µ–Ω—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
- **–ë–ª–æ–∫–∏—Ä—É—é—Ç** –≤–≤–æ–¥ –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
- **–ò—Å–ø–æ–ª—å–∑—É—é—Ç** Unified Font System –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç** Grid Snapping –¥–ª—è pixel-perfect –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ò—Å–ø–æ–ª—å–∑—É—é—Ç** —Å–∏—Å—Ç–µ–º—É 7 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ aspect ratio –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–ü—Ä–∏–º–µ–Ω—è—é—Ç** –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–æ–≤ –ø–æ —Ç–∏–ø—É —ç–∫—Ä–∞–Ω–∞

---

## ‚ú® v2.0 - –°–∏—Å—Ç–µ–º–∞ 7 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ Aspect Ratio

–í–º–µ—Å—Ç–æ –±–∏–Ω–∞—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (portrait/landscape) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 7 –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã:

| # | –î–∏–∞–ø–∞–∑–æ–Ω | screenAR | Aspect Ratio | –ú–Ω–æ–∂–∏—Ç–µ–ª—å —à—Ä–∏—Ñ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|----------|-----------|--------------|------------------|----------|
| 1 | Ultra Narrow | 0.25‚Äì0.45 | 0.35 | 1.26 | –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —É–∑–∫–∏–µ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| 2 | Extra Narrow | 0.45‚Äì0.6 | 0.525 | 1.34 | –û—á–µ–Ω—å —É–∑–∫–∏–µ (foldable phones) |
| 3 | Mobile Narrow | 0.6‚Äì0.75 | 0.60 | 1.41 | –£–∑–∫–∏–µ –º–æ–±–∏–ª—å–Ω—ã–µ (iPhone SE) |
| 4 | Mobile Standard | 0.75‚Äì1.0 | 0.75 | 1.45 | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç |
| 5 | Tablet/Square | 1.0‚Äì1.3 | 0.85 | 1.49 | –ü–ª–∞–Ω—à–µ—Ç—ã, –ø–æ—á—Ç–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ |
| 6 | Monitor Small | 1.3‚Äì1.6 | 0.95 | 1.54 | –ù–µ–±–æ–ª—å—à–∏–µ –º–æ–Ω–∏—Ç–æ—Ä—ã |
| 7 | Monitor Large | 1.6+ | 1.0 | 1.54 | –ë–æ–ª—å—à–∏–µ –º–æ–Ω–∏—Ç–æ—Ä—ã (–∫–≤–∞–¥—Ä–∞—Ç) |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- `screenAR` = canvasWidth / canvasHeight ‚Äî —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω —ç–∫—Ä–∞–Ω–∞
- `Aspect Ratio` = width / height –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–∞ v7 —É–≤–µ–ª–∏—á–µ–Ω—ã –Ω–∞ ~10% –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- Extra Narrow aspect ratio —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 0.525 (+5% —à–∏—Ä–∏–Ω—ã)

---

## UIManager

**–§–∞–π–ª:** `src/game/ui/UIManager.ts`

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ö–∞–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏.

### –§—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `openModal(modal)` | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–ø–∞—É–∑–∏—Ç —Å—Ü–µ–Ω—É) |
| `closeModal(modal)` | –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ü–µ–Ω—É) |
| `handleResize()` | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞ |
| `isModalOpen()` | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –æ–∫–Ω–æ |

### –ü—Ä–∞–≤–∏–ª–∞

1. **–¢–æ–ª—å–∫–æ –æ–¥–Ω–æ –æ–∫–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** ‚Äî UIManager –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —ç—Ç–æ
2. **–ê–≤—Ç–æ–ø–∞—É–∑–∞** ‚Äî —Å—Ü–µ–Ω–∞ –ø–∞—É–∑–∏—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏, —Ä–µ–∑—é–º–∏—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
3. **Resize-aware** ‚Äî –≤—Å–µ –º–æ–¥–∞–ª—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞

---

## –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞

### KeyQuestionModal

**–§–∞–π–ª:** `src/game/ui/KeyQuestionModal.ts`

–û–∫–Ω–æ, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–µ–µ –≤–æ–ø—Ä–æ—Å –ø—Ä–∏ –ø–æ–¥–±–æ—Ä–µ –∫–ª—é—á–∞.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         [√ó] –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è          ‚îÇ  ‚Üê Grid Snapping (–∫—Ä–∞—Ç–Ω–æ 4)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                      ‚îÇ
‚îÇ        –í–û–ü–†–û–° (Question)             ‚îÇ  ‚Üê baseFontSize √ó adaptiveMultiplier
‚îÇ                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ  –û—Ç–≤–µ—Ç 1 ‚îÇ ‚îÇ  –û—Ç–≤–µ—Ç 2 ‚îÇ  ...     ‚îÇ  ‚Üê –ö–Ω–æ–ø–∫–∏ —Å blink –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  "–ù–∞–∂–º–∏—Ç–µ –µ—â–µ —Ä–∞–∑ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è" ‚îÇ  ‚Üê –¢–µ–∫—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–∞

| –≠–ª–µ–º–µ–Ω—Ç | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å | –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ |
|---------|------------------------|---------------------|-------------------|
| –í–æ–ø—Ä–æ—Å | 1.0 | 1.26‚Äì1.54 | `baseFontSize √ó adaptiveMultiplier √ó 1.0` |
| –§–∏–¥–±—ç–∫ | 1.0 | 1.26‚Äì1.54 | `baseFontSize √ó adaptiveMultiplier √ó 1.0` |
| –ö–Ω–æ–ø–∫–∏ | 1.0 | 1.26‚Äì1.54 | `baseFontSize √ó adaptiveMultiplier √ó 1.0` |

#### –õ–æ–≥–∏–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞

–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π:

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:**
1. **–ü–µ—Ä–≤–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:** –ó–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
2. **–í—Ç–æ—Ä–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:** –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–±–µ–¥—ã, –∑–∞–∫—Ä—ã—Ç–∏–µ

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:**
- –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç, –ø–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞, –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 2—Å

#### –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `calculateUnifiedBaseFontSize()` –∫–æ—Ç–æ—Ä—ã–π –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getLongestTexts()` –æ—Ç QuizManager ‚Üí **max(question, answer, feedback)**

---

### PortalModal

**–§–∞–π–ª:** `src/game/ui/PortalModal.ts`

–û–∫–Ω–æ –ø–æ—Ä—Ç–∞–ª–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         [√ó] –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                      ‚îÇ
‚îÇ     –ü–û–†–¢–ê–õ (Portal Title)            ‚îÇ  ‚Üê baseFontSize √ó 1.3
‚îÇ                                      ‚îÇ
‚îÇ  –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞:      ‚îÇ  ‚Üê baseFontSize √ó 1.3
‚îÇ                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ   ‚îÇ  –£—Ä–æ–≤–µ–Ω—å 1 ‚îÇ  ‚îÇ  –£—Ä–æ–≤–µ–Ω—å 2 ‚îÇ ... ‚îÇ  ‚Üê –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–∞

| –≠–ª–µ–º–µ–Ω—Ç | –ú–Ω–æ–∂–∏—Ç–µ–ª—å | –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ |
|---------|-----------|-------------------|
| –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã | 1.3 (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) | `baseFontSize √ó 1.3` |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** PortalModal **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ `getFontSizeMultiplier()` ‚Äî –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.3.

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ö–Ω–æ–ø–∫–∏ —É—Ä–æ–≤–Ω—è** ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
- **–ü–æ–¥—Å–≤–µ—Ç–∫–∞** ‚Äî —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥—Å–≤–µ—á–µ–Ω
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞** ‚Äî –∑–∞–∫—Ä—ã—Ç—ã–µ —É—Ä–æ–≤–Ω–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** ‚Äî –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ (—Å–ø—Ä–∞–≤–∞ –æ—Ç —Ç–µ–∫—Å—Ç–∞)

#### –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `calculateUnifiedBaseFontSize()` –∫–æ—Ç–æ—Ä—ã–π –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getLongestTexts()` –æ—Ç QuizManager ‚Üí **max(question, answer, feedback)**

---

### GameOverModal

**–§–∞–π–ª:** `src/game/ui/GameOverModal.ts`

–û–∫–Ω–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã (–ø–æ–±–µ–¥–∞ –∏–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ).

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         [√ó] –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                      ‚îÇ
‚îÇ   GAME OVER / VICTORY                ‚îÇ  ‚Üê baseFontSize √ó 2.0
‚îÇ                                      ‚îÇ
‚îÇ   –í–∞—à —Å—á—ë—Ç: 1500                     ‚îÇ  ‚Üê baseFontSize √ó 2.0
‚îÇ   –ú–∞–∫—Å. –≤–æ–∑–º–æ–∂–Ω—ã–π: 2000              ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ   ‚îÇ   –ì–ª–∞–≤–Ω–∞—è    ‚îÇ                  ‚îÇ  ‚Üê –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–∞

| –≠–ª–µ–º–µ–Ω—Ç | –ú–Ω–æ–∂–∏—Ç–µ–ª—å | –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ |
|---------|-----------|-------------------|
| –ó–∞–≥–æ–ª–æ–≤–æ–∫ | 2.0 | `baseFontSize √ó 2.0` |
| –°—á–µ—Ç | 2.0 | `baseFontSize √ó 2.0` |
| –ö–Ω–æ–ø–∫–∏ | 1.3 | `baseFontSize √ó 1.3` |
| –§–∏–¥–±—ç–∫ | 1.3 | `baseFontSize √ó 1.3` |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** GameOverModal **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ `getFontSizeMultiplier()` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º.

#### –°–æ—Å—Ç–æ—è–Ω–∏—è

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –¶–≤–µ—Ç —Ç–µ–º—ã |
|-----------|-----------|-----------|
| `VICTORY` | "VICTORY!" | –ó–æ–ª–æ—Ç–æ–π |
| `GAME_OVER` | "GAME OVER" | –ö—Ä–∞—Å–Ω—ã–π |

#### –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–¢–µ–∫—É—â–∏–π —Å—á—ë—Ç** ‚Äî `scoreSystem.getScore()`
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑–º–æ–∂–Ω—ã–π (—É—Ä–æ–≤–µ–Ω—å)** ‚Äî `scoreSystem.getMaxPossibleScore()`
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑–º–æ–∂–Ω—ã–π (–æ–±—â–∏–π)** ‚Äî `scoreSystem.getTotalMaxPossibleScore()`

#### –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `calculateUnifiedBaseFontSize()` –∫–æ—Ç–æ—Ä—ã–π –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getLongestTexts()` –æ—Ç QuizManager ‚Üí **max(question, answer, feedback)**

---

### CoinBubbleQuiz

**–§–∞–π–ª:** `src/game/ui/CoinBubbleQuiz.ts`

–ë–∞–±–±–ª—ã –¥–ª—è –∫–≤–∏–∑–∞ –º–æ–Ω–µ—Ç–æ–∫ (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –î–∞/–ù–µ—Ç).

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ   ‚îÇ  ‚Üê –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ     –î–ê      ‚îÇ  ‚Üê –ë–∞–±–±–ª 1
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ     –ù–ï–¢     ‚îÇ  ‚Üê –ë–∞–±–±–ª 2
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–∞

| –≠–ª–µ–º–µ–Ω—Ç | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å | –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ |
|---------|------------------------|---------------------|-------------------|
| –í–æ–ø—Ä–æ—Å | 1.0 (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) | 1.26‚Äì1.54 | `baseFontSize √ó adaptiveMultiplier` |
| –ö–Ω–æ–ø–∫–∏ (–±–∞–±–±–ª—ã) | 1.0 (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) | 1.26‚Äì1.54 | `baseFontSize √ó adaptiveMultiplier` |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** CoinBubbleQuiz –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ—Ç –∂–µ** `getFontSizeMultiplier()` —á—Ç–æ –∏ KeyQuestionModal.

#### –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

**–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç:**
```typescript
const longestText = bubble1Text.length > bubble2Text.length ? bubble1Text : bubble2Text;
```

**–ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `calculateUnifiedBaseFontSize(scene, 1)` ‚Äî —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è —á—Ç–æ –∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω, –Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ fontSize –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π longestText** –∏–∑ –¥–≤—É—Ö —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –±–∞–±–±–ª–æ–≤.

#### –ó–∞—â–∏—Ç–∞ –æ—Ç 9-slice –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è

```typescript
const MIN_BUBBLE_SIZE = BUBBLE_TILE_SIZE * 3; // 120px –º–∏–Ω–∏–º—É–º
if (bubbleBtnWidth < MIN_BUBBLE_SIZE || bubbleBtnHeight < MIN_BUBBLE_SIZE) {
  logger.warn('Bubble size too small...');
  bubbleBtnWidth = Math.max(bubbleBtnWidth, MIN_BUBBLE_SIZE);
  bubbleBtnHeight = Math.max(bubbleBtnHeight, MIN_BUBBLE_SIZE);
}
```

---

## –¢–∞–±–ª–∏—Ü–∞ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π —à—Ä–∏—Ñ—Ç–æ–≤ –ø–æ —Ç–∏–ø–∞–º –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

| –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å (`getFontSizeMultiplier`) | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å | –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ |
|----------------|-----------------------------------------------|------------------------|-------------------|
| **KeyQuestionModal** | ‚úÖ **–î–ê** (1.26 - 1.54) | 1.0 √ó elementMultiplier | `baseFontSize √ó adaptiveMultiplier √ó elementMultiplier` |
| **CoinBubbleQuiz** | ‚úÖ **–î–ê** (1.26 - 1.54) | 1.0 (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) | `baseFontSize √ó adaptiveMultiplier` |
| **PortalModal** | ‚ùå –ù–ï–¢ | 1.3 (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) | `baseFontSize √ó 1.3` |
| **GameOverModal** | ‚ùå –ù–ï–¢ | 2.0, 1.3 (–ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º) | `baseFontSize √ó elementMultiplier` |

---

## –¢–∞–±–ª–∏—Ü–∞ —Å–∞–º–æ–≥–æ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ø–æ –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–∞–º

| –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç calculateUnifiedBaseFontSize | –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–∏—Å—Ç–æ—á–Ω–∏–∫) |
|----------------|----------------------------------------|-------------------------------|
| KeyQuestionModal | ‚úÖ –î–ê | `getLongestTexts()` –æ—Ç QuizManager ‚Üí max(question, answer, feedback) |
| PortalModal | ‚úÖ –î–ê | `getLongestTexts()` –æ—Ç QuizManager ‚Üí max(question, answer, feedback) |
| GameOverModal | ‚úÖ –î–ê | `getLongestTexts()` –æ—Ç QuizManager ‚Üí max(question, answer, feedback) |
| CoinBubbleQuiz | ‚úÖ –î–ê | **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç** ‚Üí max(bubble1Text, bubble2Text) |

---

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ú–Ω–æ–∂–∏—Ç–µ–ª–∏ —à—Ä–∏—Ñ—Ç–æ–≤ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º (FONT_SIZE_MULTIPLIERS)

**–§–∞–π–ª:** `src/constants/textStyles.ts`

```typescript
export const FONT_SIZE_MULTIPLIERS = {
  ULTRA_NARROW: 1.26,   // –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —É–∑–∫–∏–µ (AR 0.25-0.45)
  EXTRA_NARROW: 1.34,   // –û—á–µ–Ω—å —É–∑–∫–∏–µ (AR 0.45-0.6)
  MOBILE_NARROW: 1.41,  // –£–∑–∫–∏–µ –º–æ–±–∏–ª—å–Ω—ã–µ (AR 0.6-0.75)
  MOBILE_STANDARD: 1.45, // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ (AR 0.75-1.0)
  TABLET_SQUARE: 1.49,  // –ü–ª–∞–Ω—à–µ—Ç—ã, –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ (AR 1.0-1.3)
  MONITOR_SMALL: 1.54,   // –ù–µ–±–æ–ª—å—à–∏–µ –º–æ–Ω–∏—Ç–æ—Ä—ã (AR 1.3-1.6)
  MONITOR_LARGE: 1.54    // –ë–æ–ª—å—à–∏–µ –º–æ–Ω–∏—Ç–æ—Ä—ã (AR 1.6+)
} as const;
```

### –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤

```typescript
// KeyQuestionModal
export const KEY_QUESTION_FONT_SIZE_MULTIPLIER = 1.0;
export const KEY_FEEDBACK_FONT_SIZE_MULTIPLIER = 1.0;
export const KEY_BUTTON_FONT_SIZE_MULTIPLIER = 1.0;

// CoinBubbleQuiz (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é, –º–Ω–æ–∂–∏—Ç–µ–ª—å –∏–∑ getFontSizeMultiplier)
export const COIN_QUESTION_FONT_SIZE_MULTIPLIER = 1.0;
export const COIN_BUTTON_FONT_SIZE_MULTIPLIER = 1.0;
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫

```typescript
export const BUTTON_PADDING_BASE_X = 3; // 3px –∏—Å—Ö–æ–¥–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏ ‚Üí 12px –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö (√ó4)
export const BUTTON_PADDING_BASE_Y = 2; // 2px –∏—Å—Ö–æ–¥–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏ ‚Üí 8px –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö (√ó4)
```

---

## –û–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. Grid Snapping –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è

```typescript
// –†–∞–∑–º–µ—Ä—ã –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (–∫—Ä–∞—Ç–Ω—ã 8)
const modalWidth = snapToGridDouble(desiredWidth);
const modalHeight = snapToGridDouble(desiredHeight);

// –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–∫—Ä–∞—Ç–Ω—ã 4)
const modalX = snapToGrid(cameraX - modalWidth / 2);
const modalY = snapToGrid(cameraY - modalHeight / 2);

// –†–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è (–∫—Ä–∞—Ç–µ–Ω 4)
const closeSize = 14 * 4; // 56

// –ü–æ–∑–∏—Ü–∏—è –∫–Ω–æ–ø–∫–∏ (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∫—Ä–∞—Ç–Ω–æ 4)
const closeX = modalX + modalWidth / 2 - closeSize / 2;
const closeY = modalY - closeSize / 2;
```

### 2. Unified Font System —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –º–Ω–æ–∂–∏—Ç–µ–ª—è–º–∏

```typescript
// –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
const baseFontSize = FontSizeCalculator.calculateUnifiedBaseFontSize(
    scene, currentLevel
);

// –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å (–¥–ª—è KeyQuestionModal –∏ CoinBubbleQuiz)
const screenAR = canvasWidth / canvasHeight;
const adaptiveMultiplier = getFontSizeMultiplier(screenAR);

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
const commonFontSize = baseFontSize * adaptiveMultiplier;
title.setFontSize(commonFontSize);
buttons.forEach(btn => btn.setFontSize(commonFontSize));
```

### 3. –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –∑—É–º–∞

```typescript
// –î–ª—è —Ç–µ–∫—Å—Ç–∞
text.setScale(1 / camera.zoom);

// –î–ª—è —Ñ–æ–Ω–∞
background.setScale(1 / camera.zoom);

// –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
const adjustedX = x * camera.zoom;
const adjustedY = y * camera.zoom;
```

### 4. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

```typescript
// 1. Create
constructor(scene, options);
create();
createBackground();
createContent();
createButtons();

// 2. Update
update(); // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π

// 3. Destroy
destroy();
cleanup(); // –£–¥–∞–ª–µ–Ω–∏–µ listeners, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ tweens
```

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞ –≤—ã–≤–æ–¥—è—Ç—Å—è –ª–æ–≥–∏:

```
üéØ ASPECT RANGE: üì± Mobile Standard | canvas=1056√ó1184 | screenAR=0.89 | modalAR=0.75 | font√ó1.45 | [resize]
```

–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
window.logAspectRatioRange(520, 1000)  // Extra Narrow
window.logAspectRatioRange(1920, 1080) // Monitor Large
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

### –®–∞–±–ª–æ–Ω

```typescript
export default class NewModal extends Phaser.GameObjects.Container {
    private background: NineSliceBackground;
    private closeButton: Button;
    private content: Phaser.GameObjects.Text;

    constructor(scene: Phaser.Scene, options: NewModalOptions) {
        super(scene, 0, 0);
        scene.add.existing(this);

        this.create();
    }

    private create(): void {
        this.createBackground();
        this.createContent();
        this.createCloseButton();
        this.setupPositioning();
    }

    private createBackground(): void {
        // Grid Snapping –¥–ª—è —Ä–∞–∑–º–µ—Ä–æ–≤
        const width = snapToGridDouble(options.width);
        const height = snapToGridDouble(options.height);

        this.background = new NineSliceBackground(this.scene, width, height);
        this.add(this.background);
    }

    private createContent(): void {
        // Unified Font System —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –º–Ω–æ–∂–∏—Ç–µ–ª–µ–º
        const baseFontSize = FontSizeCalculator.calculateUnifiedBaseFontSize(...);
        const adaptiveMultiplier = getFontSizeMultiplier(screenAR);
        const finalFontSize = baseFontSize * adaptiveMultiplier;

        this.content = this.scene.add.text(0, 0, options.text, {
            fontSize: `${finalFontSize}px`
        });
        this.content.setScale(1 / this.scene.cameras.main.zoom);
        this.add(this.content);
    }

    private createCloseButton(): void {
        this.closeButton = new Button(this.scene, {
            text: "√ó",
            onClick: () => this.close()
        });
        this.add(this.closeButton);
    }

    private setupPositioning(): void {
        // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∫–∞–º–µ—Ä–µ
        const cam = this.scene.cameras.main;
        this.setPosition(cam.midPoint.x, cam.midPoint.y);
    }

    public close(): void {
        UIManager.getInstance().closeModal(this);
    }

    public destroy(): void {
        // Cleanup
        this.closeButton.destroy();
        this.background.destroy();
        this.content.destroy();
        super.destroy();
    }
}
```

---

## Troubleshooting

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `snapToGridDouble` –¥–ª—è —Ä–∞–∑–º–µ—Ä–æ–≤
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `snapToGrid` –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
3. –ü–æ–∑–∏—Ü–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `setPosition(cam.midPoint.x, cam.midPoint.y)`

### –¢–µ–∫—Å—Ç —Ä–∞–∑–º—ã—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. `text.setScale(1 / camera.zoom)` –ø—Ä–∏–º–µ–Ω—ë–Ω
2. `text.setResolution()` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–æ–±—ã—á–Ω–æ > 1)
3. Font size —Ä–∞—Å—Å—á–∏—Ç–∞–Ω —á–µ—Ä–µ–∑ `FontSizeCalculator`

### –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–µ –Ω–∞ –º–µ—Å—Ç–µ

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –†–∞–∑–º–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫—Ä–∞—Ç–µ–Ω 8
2. –†–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏ –∫—Ä–∞—Ç–µ–Ω 4
3. –ü–æ–∑–∏—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: `modalX + modalWidth / 2 - closeSize / 2`

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. UIManager –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º –º–æ–¥–∞–ª–µ
2. `close()` –≤—ã–∑—ã–≤–∞–µ—Ç `UIManager.closeModal(this)`
3. –ù–µ—Ç blockers –∏–ª–∏ locked state

### –®—Ä–∏—Ñ—Ç—ã —Å–ª–∏—à–∫–æ–º –º–µ–ª–∫–∏–µ –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getFontSizeMultiplier()` –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è
2. –ó–Ω–∞—á–µ–Ω–∏—è `FONT_SIZE_MULTIPLIERS` –≤ `textStyles.ts` –∞–∫—Ç—É–∞–ª—å–Ω—ã
3. –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω aspect ratio

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **UI_GUIDE.md** ‚Äî –û–±—â–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- **SCALING_SYSTEM.md** ‚Äî –°–∏—Å—Ç–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ letterboxing
- **FONT_SIZING_SYSTEM.md** ‚Äî –†–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ —à—Ä–∏—Ñ—Ç–æ–≤

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 2.0 (2026-02-06)
- ‚úÖ **–°–ò–°–¢–ï–ú–ê 7 –î–ò–ê–ü–ê–ó–û–ù–û–í ASPECT RATIO** ‚Äî –≤–º–µ—Å—Ç–æ –±–∏–Ω–∞—Ä–Ω–æ–π portrait/landscape
- ‚úÖ **–ê–î–ê–ü–¢–ò–í–ù–´–ï –ú–ù–û–ñ–ò–¢–ï–õ–ò –®–†–ò–§–¢–û–í** ‚Äî —Ä–∞–∑–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (1.26‚Äì1.54)
- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π –Ω–∞ ~10%** ‚Äî –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- ‚úÖ **Extra Narrow —à–∏—Ä–µ –Ω–∞ 5%** ‚Äî aspect ratio 0.50 ‚Üí 0.525
- ‚úÖ **CoinBubbleQuiz –∏—Å–ø–æ–ª—å–∑—É–µ—Ç getFontSizeMultiplier()** ‚Äî —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –º–æ–¥–∞–ª–∞–º–∏
- ‚úÖ **–û—Ç–∫–ª—é—á–µ–Ω—ã –ª–æ–≥–∏ pointerover** ‚Äî –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ **–¢–∞–±–ª–∏—Ü—ã –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π –∏ longestText** ‚Äî –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏

### –í–µ—Ä—Å–∏—è 1.0 (2026-01-28)
- –ü–µ—Ä–≤–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Unified Font System
- Grid Snapping
- Lifecycle –ø–∞—Ç—Ç–µ—Ä–Ω—ã

---

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|--------|-----------|
| 2026-02-06 | 2.0 | –°–∏—Å—Ç–µ–º–∞ 7 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ aspect ratio, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ |
| 2026-01-28 | 1.0 | –ü–µ—Ä–≤–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
