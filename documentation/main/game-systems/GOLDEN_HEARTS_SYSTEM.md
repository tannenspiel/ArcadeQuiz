# –°–∏—Å—Ç–µ–º–∞ –ó–æ–ª–æ—Ç—ã—Ö –°–µ—Ä–¥–µ—á–µ–∫ (Golden Hearts System)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-28
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º
**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**
- `src/game/entities/Player.ts` (lines 60-64, 1337-1466)
- `src/assets/Game_01/images/Heart.Gold5x5.png`

---

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∑–æ–ª–æ—Ç—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª—é—á–µ–π, –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–º. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é –≥—Ä–∞—Ñ–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª—é—á–µ–π.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–≤—É—Ö—Å–ª–æ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (–±–∞–∑–æ–≤—ã–π —Å–ø—Ä–∞–π—Ç + —Å–≤–µ—á–µ–Ω–∏–µ)
- –ú–∏–≥–∞—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç —á–µ—Ä–µ–∑ alpha-–∞–Ω–∏–º–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ADD blend mode –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å–≤–µ—á–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª—é—á–µ–π

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```typescript
// Player.ts (lines 60-64)
private goldHeartSprites: Phaser.GameObjects.Sprite[] = [];           // –ë–∞–∑–æ–≤—ã–µ —Å–ø—Ä–∞–π—Ç—ã
private goldHeartGlowSprites: Phaser.GameObjects.Sprite[] = [];        // –°–ø—Ä–∞–π—Ç—ã —Å–≤–µ—á–µ–Ω–∏—è
private goldHeartBlinkTweens: Phaser.Tweens.Tween[] = [];             // –ê–Ω–∏–º–∞—Ü–∏–∏ –º–∏–≥–∞–Ω–∏—è
private previousKeyCount: number = -1;                                 // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

### –î–≤—É—Ö—Å–ª–æ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

–ö–∞–∂–¥–æ–µ –∑–æ–ª–æ—Ç–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –î–í–£–• —Å–ª–æ—ë–≤:

| –°–ª–æ–π | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | Blend Mode | Alpha | Depth |
|------|------------|------------|-------|-------|
| **Base Sprite** | –ë–∞–∑–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ | NORMAL | 1.0 (–ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π) | 10 |
| **Glow Sprite** | –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è | ADD | 0.0 ‚Üí 0.6 ‚Üí 0.0 (–º–∏–≥–∞–Ω–∏–µ) | 11 |

**–ü–æ—á–µ–º—É –¥–≤–∞ —Å–ª–æ—è?**
- Base Sprite –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —á—ë—Ç–∫–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (NORMAL blend)
- Glow Sprite —Å–æ–∑–¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç "–º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ" —Å–∏—è–Ω–∏—è (ADD blend)
- –†–∞–∑–Ω—ã–µ depth –∑–Ω–∞—á–µ–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –ø–æ —Ñ–∞–∑–∞–º

–°–∏—Å—Ç–µ–º–∞ –∑–æ–ª–æ—Ç—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑–∞–Ω–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º `HUDManager` –∏ —Ñ–∞–∑–æ–π –∏–≥—Ä—ã:

- **–§–∞–∑–∞ COIN:** –í—Å–µ –∑–æ–ª–æ—Ç—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏ (–∫–ª—é—á–∏) **—Å–∫—Ä—ã—Ç—ã**. –ò–≥—Ä–æ–∫ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å—á–µ—Ç—á–∏–∫ –º–æ–Ω–µ—Ç –≤ HUD.
- **–§–∞–∑–∞ KEY:** –°–µ—Ä–¥–µ—á–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏ –ø–æ –º–µ—Ä–µ —Å–±–æ—Ä–∞ –∫–ª—é—á–µ–π.
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è `GAME_PHASE_CHANGED`.

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥: `updateGoldHearts()`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/game/entities/Player.ts:1337-1466`

```typescript
private updateGoldHearts(
    keyCount: number,
    heartPositions?: { x: number; y: number }[],
    goldHeartTexture?: string,
    heartScale?: number
): void
```

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–ø—Ä–∞–π—Ç–æ–≤** (lines 1337-1367):
   ```typescript
   // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Å–ø—Ä–∞–π—Ç—ã
   this.goldHeartSprites.forEach(sprite => sprite.destroy());
   this.goldHeartGlowSprites.forEach(sprite => sprite.destroy());
   this.goldHeartBlinkTweens.forEach(tween => tween.stop());

   // –û—á–∏—â–∞–µ–º –º–∞—Å—Å–∏–≤—ã
   this.goldHeartSprites = [];
   this.goldHeartGlowSprites = [];
   this.goldHeartBlinkTweens = [];
   ```

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** (lines 1368-1389):
   ```typescript
   // –ü–æ–∑–∏—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π –∏–≥—Ä–æ–∫–∞)
   const defaultPositions = [
       { x: 60, y: -30 },
       { x: 85, y: -30 },
       { x: 110, y: -30 }
   ];

   // –¢–µ–∫—Å—Ç—É—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   const texture = goldHeartTexture || 'UI.UI_Inventory5x5_0'; // –∏–ª–∏ Heart.Gold5x5.png

   // –ú–∞—Å—à—Ç–∞–± –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   const scale = heartScale || 3.0;
   ```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—ã —Å–ø—Ä–∞–π—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞** (lines 1390-1446):

   **3.1. –ë–∞–∑–æ–≤—ã–π —Å–ø—Ä–∞–π—Ç:**
   ```typescript
   const goldHeartBase = this.scene.add.sprite(roundedX, roundedY, goldHeartTexture);
   goldHeartBase.setScale(heartScale);
   goldHeartBase.setDepth(10);          // –í–´–®–ï –æ–±—ã—á–Ω—ã—Ö —Å–µ—Ä–¥–µ—á–µ–∫ (depth=9)
   goldHeartBase.setAlpha(1);           // –ü–û–õ–ù–û–°–¢–¨–Æ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π
   goldHeartBase.setBlendMode(Phaser.BlendModes.NORMAL);
   ```

   **3.2. –°–ø—Ä–∞–π—Ç —Å–≤–µ—á–µ–Ω–∏—è:**
   ```typescript
   const goldHeartGlow = this.scene.add.sprite(roundedX, roundedY, goldHeartTexture);
   goldHeartGlow.setScale(heartScale);
   goldHeartGlow.setDepth(11);          // –í–´–®–ï –±–∞–∑–æ–≤–æ–≥–æ —Å–ø—Ä–∞–π—Ç–∞
   goldHeartGlow.setAlpha(0);           // –°—Ç–∞—Ä—Ç—É–µ–º —Å 0
   goldHeartGlow.setBlendMode(Phaser.BlendModes.ADD); // ADD –¥–ª—è —Å–≤–µ—á–µ–Ω–∏—è
   ```

   **3.3. –ú–∏–≥–∞—é—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è:**
   ```typescript
   const blinkTween = this.scene.tweens.add({
       targets: goldHeartGlow,
       alpha: 0.6,                      // –ú–∞–∫—Å–∏–º—É–º 60% –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
       duration: 500,                   // 500ms –Ω–∞ —Ü–∏–∫–ª
       yoyo: true,                      // –¢—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ
       repeat: -1,                      // –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ
       ease: 'Sine.easeInOut'           // –ü–ª–∞–≤–Ω–∞—è —Å–∏–Ω—É—Å–æ–∏–¥–∞
   });
   ```

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫** (lines 1447-1455):
   ```typescript
   this.goldHeartSprites.push(goldHeartBase);
   this.goldHeartGlowSprites.push(goldHeartGlow);
   this.goldHeartBlinkTweens.push(blinkTween);
   ```

---

## –í—ã–∑–æ–≤ —Å–∏—Å—Ç–µ–º—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –ø–æ–¥–±–æ—Ä–µ –∫–ª—é—á–∞

**–ú–µ—Ç–æ–¥:** `Player.onKeyCollected()` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `updateGoldHearts()`

```typescript
// –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–ª—é—á–∞
this.collectedKeys++;
this.updateGoldHearts(this.collectedKeys);
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```typescript
private previousKeyCount: number = -1;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
if (this.collectedKeys !== this.previousKeyCount) {
    this.updateGoldHearts(this.collectedKeys);
    this.previousKeyCount = this.collectedKeys;
}
```

---

## –≠—Ñ—Ñ–µ–∫—Ç –º–∏–≥–∞–Ω–∏—è

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| **Alpha range** | 0.0 ‚Üí 0.6 ‚Üí 0.0 | –û—Ç –ø–æ–ª–Ω–æ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –¥–æ 60% |
| **Duration** | 500ms | –í—Ä–µ–º—è –æ–¥–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ |
| **Yoyo** | true | –ê–Ω–∏–º–∞—Ü–∏—è –∏–≥—Ä–∞–µ—Ç —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ |
| **Repeat** | -1 | –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ |
| **Ease** | Sine.easeInOut | –ü–ª–∞–≤–Ω–æ–µ —Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ |
| **Target** | Glow Sprite ONLY | –ë–∞–∑–æ–≤—ã–π —Å–ø—Ä–∞–π—Ç –ù–ï –∞–Ω–∏–º–∏—Ä—É–µ—Ç—Å—è |

### –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

```
Alpha: 1.0 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (Base Sprite - –≤—Å–µ–≥–¥–∞)
Alpha: 0.6 ‚îÄ‚îÄ‚ïÆ                    (Glow Sprite - –º–∏–≥–∞–µ—Ç)
Alpha: 0.0   ‚ï∞‚îÄ‚î¨‚îÄ‚ïÆ‚îÄ‚î¨‚îÄ‚ïÆ‚îÄ‚î¨‚îÄ‚ïÆ‚îÄ‚î¨‚îÄ‚ïÆ‚îÄ‚î¨‚îÄ
              ‚îî‚îÄ‚îò ‚îî‚îÄ‚îò ‚îî‚îÄ‚îò ‚îî‚îÄ‚îò ‚îî‚îÄ‚îò
              500ms 500ms 500ms
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–≤–µ—á–µ–Ω–∏–µ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç, —Å–æ–∑–¥–∞–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç "–∂–∏–≤–æ–≥–æ" –∑–æ–ª–æ—Ç–æ–≥–æ —Å–µ—Ä–¥–µ—á–∫–∞.

---

## Blend Modes

### NORMAL (–±–∞–∑–æ–≤—ã–π —Å–ø—Ä–∞–π—Ç)

```typescript
goldHeartBase.setBlendMode(Phaser.BlendModes.NORMAL);
```

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—ã—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä—ã
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß—ë—Ç–∫–æ–µ, –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### ADD (—Å–ø—Ä–∞–π—Ç —Å–≤–µ—á–µ–Ω–∏—è)

```typescript
goldHeartGlow.setBlendMode(Phaser.BlendModes.ADD);
```

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è/–ª—é–º–∏–Ω–æ—Å—Ü–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ó–Ω–∞—á–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Ñ–æ–Ω–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ø—Ä–∫–∏–π, "—Å–≤–µ—Ç—è—â–∏–π—Å—è" –æ—Ä–µ–æ–ª –≤–æ–∫—Ä—É–≥ —Å–µ—Ä–¥–µ—á–∫–∞

**–ü–æ—á–µ–º—É ADD —Å–æ–∑–¥–∞—ë—Ç —Å–≤–µ—á–µ–Ω–∏–µ:**
```
–§–∏–Ω–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç = –¶–≤–µ—Ç —Å–ø—Ä–∞–π—Ç–∞ + –¶–≤–µ—Ç —Ñ–æ–Ω–∞
```
–ü—Ä–∏.alpha < 1.0 —ç—Ñ—Ñ–µ–∫—Ç –º—è–≥—á–µ, —Å–æ–∑–¥–∞–≤–∞—è "–¥—ã–º—á–∞—Ç–æ–µ" —Å–≤–µ—á–µ–Ω–∏–µ.

---

## Depth Configuration

| –û–±—ä–µ–∫—Ç | Depth | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|-------|------------|
| –§–æ–Ω –∏–≥—Ä—ã | 0-5 | –ó–∞–¥–Ω–∏–π –ø–ª–∞–Ω |
| –û–±—ã—á–Ω—ã–µ —Å–µ—Ä–¥–µ—á–∫–∏ (health) | 9 | Regular hearts |
| **Gold Heart Base** | **10** | **–í–´–®–ï –æ–±—ã—á–Ω—ã—Ö** |
| **Gold Heart Glow** | **11** | **–í–´–®–ï –±–∞–∑–æ–≤–æ–≥–æ** |
| UI —ç–ª–µ–º–µ–Ω—Ç—ã | 100+ | –ü–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω |

---

## –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∑–∏—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```typescript
const defaultPositions = [
    { x: 60, y: -30 },   // –ü–µ—Ä–≤–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ (—Å–ª–µ–≤–∞)
    { x: 85, y: -30 },   // –í—Ç–æ—Ä–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ (—Ü–µ–Ω—Ç—Ä)
    { x: 110, y: -30 }   // –¢—Ä–µ—Ç—å–µ —Å–µ—Ä–¥–µ—á–∫–æ (—Å–ø—Ä–∞–≤–∞)
];
```

**–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ:** –¶–µ–Ω—Ç—Ä —Å–ø—Ä–∞–π—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

**–í–∏–∑—É–∞–ª—å–Ω–æ:**
```
        ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è     (y = -30, –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π)
         ‚îÉ
        üë§          (y = 0, —Ü–µ–Ω—Ç—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞)
```

### Grid Snapping

–ü–æ–∑–∏—Ü–∏–∏ –æ–∫—Ä—É–≥–ª—è—é—Ç—Å—è –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –ø–æ —Å–µ—Ç–∫–µ:

```typescript
const gridX = Math.round(x / this.gridSize) * this.gridSize;
const gridY = Math.round(y / this.gridSize) * this.gridSize;
```

**gridSize:** –û–±—ã—á–Ω–æ `BASE_SCALE = 4.0` (–∏–∑ Grid Snapping system)

---

## –ê—Å—Å–µ—Ç—ã

### –¢–µ–∫—Å—Ç—É—Ä–∞ –∑–æ–ª–æ—Ç–æ–≥–æ —Å–µ—Ä–¥–µ—á–∫–∞

**–§–∞–π–ª:** `src/assets/Game_01/images/Heart.Gold5x5.png`

**–†–∞–∑–º–µ—Ä:** 5x5 –ø–∏–∫—Å–µ–ª–µ–π (–∏—Å—Ö–æ–¥–Ω—ã–π)

**–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```typescript
heartScale = 3.0;  // –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 3 —Ä–∞–∑–∞
// –ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä: 15x15 –ø–∏–∫—Å–µ–ª–µ–π –Ω–∞ —ç–∫—Ä–∞–Ω–µ
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–ø—Ä–∞–π—Ç–æ–≤:**
- –°–º–æ—Ç—Ä–∏—Ç–µ `src/config/spritesheetConfigs.ts` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ textures
- –¢–µ–∫—Å—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ LoadingScene

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏

```typescript
this.updateGoldHearts(
    this.collectedKeys,
    [{ x: 50, y: -40 }, { x: 80, y: -40 }, { x: 110, y: -40 }]
);
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

```typescript
this.updateGoldHearts(
    this.collectedKeys,
    undefined,      // default positions
    undefined,      // default texture
    5.0             // –ë–û–õ–¨–®–û–ô —Ä–∞–∑–º–µ—Ä
);
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä—ã

```typescript
this.updateGoldHearts(
    this.collectedKeys,
    undefined,
    'Custom.GoldHeart'  // –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞
);
```

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–ø—Ä–∞–π—Ç–æ–≤

–ü—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏:

```typescript
destroy(): void {
    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö tweens
    this.goldHeartBlinkTweens.forEach(tween => tween.stop());

    // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Å–ø—Ä–∞–π—Ç–æ–≤
    this.goldHeartSprites.forEach(sprite => sprite.destroy());
    this.goldHeartGlowSprites.forEach(sprite => sprite.destroy());

    // –û—á–∏—Å—Ç–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤
    this.goldHeartSprites = [];
    this.goldHeartGlowSprites = [];
    this.goldHeartBlinkTweens = [];

    super.destroy();
}
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ–±—ã—á–Ω—ã–º–∏ —Å–µ—Ä–¥–µ—á–∫–∞–º–∏ (Health)

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Health Hearts | Gold Hearts |
|----------------|---------------|-------------|
| **Depth** | 9 | 10 (base) + 11 (glow) |
| **Blend Mode** | NORMAL | NORMAL + ADD |
| **Alpha Animation** | –ù–µ—Ç | –î–∞ (0.0 ‚Üí 0.6 ‚Üí 0.0) |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—ë–≤** | 1 | 2 |
| **–≠—Ñ—Ñ–µ–∫—Ç** | –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ | –ú–∏–≥–∞—é—â–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ |

---

## Troubleshooting

### –°–µ—Ä–¥–µ—á–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –¢–µ–∫—Å—Ç—É—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ LoadingScene
2. `keyCount > 0` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `updateGoldHearts()`
3. –ü–æ–∑–∏—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–∞–º–µ—Ä—ã
4. Depth –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (10-11)

### –ù–µ—Ç –º–∏–≥–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. Tween —Å–æ–∑–¥–∞–Ω –¥–ª—è `goldHeartGlowSprites` (–ù–ï –¥–ª—è base)
2. `repeat: -1` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
3. `alpha: 0` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ glow sprite

### –°–≤–µ—á–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º —è—Ä–∫–æ–µ/—Ç—É—Å–∫–ª–æ–µ

**–ù–∞—Å—Ç—Ä–æ–π—Ç–µ:**
```typescript
alpha: 0.6  // –£–º–µ–Ω—å—à–∏—Ç–µ/—É–≤–µ–ª–∏—á—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ (0.0 - 1.0)
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ï—Å–ª–∏ –ª–∞–≥–∏:**
1. –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π (–º–∞–∫—Å–∏–º—É–º 3)
2. –£–≤–µ–ª–∏—á—å—Ç–µ `duration` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000ms –≤–º–µ—Å—Ç–æ 500ms)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ tweens –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|--------|-----------|
| 2026-01-28 | 1.0 | –ü–µ—Ä–≤–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã |

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

- **Grid Snapping System:** `documentation/main/UI_TEXT_SCALING.md`
- **Player Entity:** `src/game/entities/Player.ts`
- **Spritesheet Config:** `src/config/spritesheetConfigs.ts`
- **Loading System:** `src/game/scenes/LoadingScene.ts`
